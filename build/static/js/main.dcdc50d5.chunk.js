(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{39:function(t,e,n){},40:function(t,e,n){"use strict";n.r(e);var c=n(15),r=n.n(c),o=n(6),a=n(3),s=n(2),u=n(0),i=function(t){var e=t.filter,n=t.handler;return Object(u.jsxs)("div",{children:["filter with: ",Object(u.jsx)("input",{value:e,onChange:n})]})},l=function(t){var e=t.addContact,n=t.newName,c=t.newNumber,r=t.onChangeName,o=t.onChangeNumber;return Object(u.jsxs)("form",{onSubmit:e,children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:n,onChange:r})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{value:c,onChange:o})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},d=n(4),f=n.n(d),j="/api/persons",b=function(){return f.a.get(j).then((function(t){return t.data}))},h=function(t){return f.a.post(j,t).then((function(t){return t.data}))},m=function(t,e){return f.a.put("".concat(j,"/").concat(t),e).then((function(t){return t.data}))},O=function(t){var e="".concat(j,"/").concat(t);return f.a.delete(e).then((function(t){return t.data}))},v=function(t){var e=t.contactsToShow,n=t.contacts,c=t.setContacts,r=t.setErrorMessage,o=t.setIsError;return e.map((function(t){var e=t.id,a=C({setContacts:c,contacts:n,id:e,setErrorMessage:r,setIsError:o});return Object(u.jsxs)("p",{children:[" ",t.name," ",t.number," ",Object(u.jsx)("button",{onClick:a,children:" delete "})," "]},t.id)}))},C=function(t){var e=t.contacts,n=t.id,c=t.setContacts,r=t.setErrorMessage,o=t.setIsError;return function(){O(n).then((function(t){c(g({contacts:e,id:n,returnedContact:t})),r("Contact was removed successfully"),o(!1),setTimeout((function(){r(null)}),5e3)})).catch((function(t){console.log("error",t),r("Contact was already removed from the server"),o(!0),setTimeout((function(){r(null)}),5e3)}))}},g=function(t){var e=t.contacts,n=t.id,c=t.returnedContact;return e.map((function(t){return t.id!==n?t:c})).filter((function(t){return 0!==Object.keys(t).length}))},p=function(t){var e=t.contactsToShow,n=t.contacts,c=t.setContacts,r=t.setErrorMessage,o=t.setIsError;return Object(u.jsx)("div",{children:v({contactsToShow:e,contacts:n,setContacts:c,setErrorMessage:r,setIsError:o}).filter((function(t){return null!==t.key}))})},x=function(t){var e=t.message,n=t.isError;return null===e?null:n?Object(u.jsx)("div",{className:"error",children:e}):Object(u.jsx)("div",{className:"success",children:e})},w=function(t,e){return e.reduce((function(e,n){return e+(n.name===t)}),!1)},E=function(){var t=Object(s.useState)([]),e=Object(a.a)(t,2),n=e[0],c=e[1],r=Object(s.useState)(""),d=Object(a.a)(r,2),f=d[0],j=d[1],O=Object(s.useState)(""),v=Object(a.a)(O,2),C=v[0],g=v[1],E=Object(s.useState)(""),S=Object(a.a)(E,2),N=S[0],y=S[1],T=Object(s.useState)(!0),k=Object(a.a)(T,2),I=k[0],M=k[1],J=Object(s.useState)(null),L=Object(a.a)(J,2),A=L[0],B=L[1],D=Object(s.useState)(!1),P=Object(a.a)(D,2),R=P[0],q=P[1];Object(s.useEffect)((function(){console.log("effect"),b().then((function(t){c(t)})).catch()}),[]);var z=function(t){var e=n.find((function(e){return e.id===t})),r=Object(o.a)(Object(o.a)({},e),{},{number:C});m(t,r).then((function(r){c(n.map((function(e){return e.id!==t?e:r}))),B("Contact '".concat(e.name,"' was updated successfully")),q(!1),setTimeout((function(){B(null)}),5e3)})).catch((function(r){B("Contact '".concat(e.name,"' is not on the server")),q(!0),setTimeout((function(){B(null)}),5e3),console.log("error",r),c(n.filter((function(e){return e.id!==t})))}))},F=I?n:n.filter((function(t){return t.name.toLowerCase().includes(N.toLowerCase())}));return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(x,{message:A,isError:R}),Object(u.jsx)(i,{filter:N,handler:function(t){y(t.target.value),""!==t.target.value?M(!1):M(!0)}}),Object(u.jsx)("h2",{children:"Add a new contact"}),Object(u.jsx)(l,{addContact:function(t){t.preventDefault();var e={name:f,number:C};if(w(f,n)){var r=n.find((function(t){return t.name===f}));window.confirm("".concat(f," is already in the phonebook. Replace the old with new one?"))&&z(r.id)}else h(e).then((function(t){c(n.concat(t)),B("Contact '".concat(f,"' was added successfully")),q(!1),setTimeout((function(){B(null)}),5e3)})).catch((function(t){B("Contact is already in the phonebook",!0),q(!0),setTimeout((function(){B(null)}),5e3)}));j(""),g("")},newName:f,newNumber:C,onChangeName:function(t){j(t.target.value)},onChangeNumber:function(t){g(t.target.value)}}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(p,{contactsToShow:F,contacts:n,setContacts:c,setErrorMessage:B,setIsError:q})]})};n(39);r.a.render(Object(u.jsx)(E,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.dcdc50d5.chunk.js.map